{"version":3,"sources":["../../src/components/History.js"],"names":["createHistory","historyType","historyCreator","History","history","state","location","action","query","props","dispatch","extractQuery","unlisten","listen","setState","Children","only","children","Component","routing","HashHistory","BrowserHistory","MemoryHistory"],"mappings":";;;;;;;;;AAGA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;+eARA;;;;;AAUA,IAAMA,gBAAgB,SAAhBA,aAAgB,CAACC,WAAD,EAAiB;AACnC,QAAIC,uBAAJ;AACA,YAAQD,WAAR;AACI,aAAK,MAAL;AACIC;AACA;AACJ,aAAK,SAAL;AACIA;AACA;AACJ,aAAK,QAAL;AACIA;AACA;AACJ;AACIA;AAXR;;AAFmC,QAgB7BC,OAhB6B;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA,gMAiB/BC,OAjB+B,GAiBrBF,gBAjBqB,QAmB/BG,KAnB+B,GAmBvB;AACJC,0BAAU,IADN;AAEJC,wBAAQ;AAFJ,aAnBuB;AAAA;;AAAA;AAAA;AAAA,yCAwBlBC,KAxBkB,EAwBX;AAChB,uBAAO,EAAP;AACH;AA1B8B;AAAA;AAAA,iDA4BV;AAAA;;AACjB,qBAAKC,KAAL,CAAWC,QAAX,CAAoB,0BAAY;AAC5BT,iCAAaA,WADe;AAE5BG,6BAAS,KAAKA,OAFc;AAG5BE,8BAAU,KAAKF,OAAL,CAAaE,QAHK;AAI5BE,2BAAO,KAAKG,YAAL;AAJqB,iBAAZ,CAApB;;AAOA,qBAAKC,QAAL,GAAgB,KAAKR,OAAL,CAAaS,MAAb,CAAoB,UAACP,QAAD,EAAWC,MAAX,EAAsB;AACtD;AACA,2BAAKO,QAAL,CAAc;AACVR,kCAAUA,QADA;AAEVC,gCAAQA;AAFE,qBAAd,EAGG,YAAY;AACX,6BAAKE,KAAL,CAAWC,QAAX,CAAoB,0BAAY;AAC5BJ,sCAAU,KAAKD,KAAL,CAAWC,QADO;AAE5BE,mCAAO,KAAKG,YAAL;AAFqB,yBAAZ,CAApB;AAIH,qBARD;AASH,iBAXe,CAAhB;AAYH;AAhD8B;AAAA;AAAA,mDAkDR;AACnB,qBAAKC,QAAL;AACH;AApD8B;AAAA;AAAA,qCAsDtB;AACL,uBAAO,gBAAMG,QAAN,CAAeC,IAAf,CAAoB,KAAKP,KAAL,CAAWQ,QAA/B,CAAP;AACH;AAxD8B;;AAAA;AAAA,MAgBb,gBAAMC,SAhBO;;AA2DnC,WAAO,yBAAQ;AAAA,eAAU,EAAEC,SAASd,MAAMc,OAAjB,EAAV;AAAA,KAAR,EAA+ChB,OAA/C,CAAP;AACH,CA5DD;;AA8DA,IAAMiB,cAAcpB,cAAc,MAAd,CAApB;AACA,IAAMqB,iBAAiBrB,cAAc,SAAd,CAAvB;AACA,IAAMsB,gBAAgBtB,cAAc,QAAd,CAAtB;;QAESoB,W,GAAAA,W;QAAaC,c,GAAAA,c;QAAgBC,a,GAAAA,a;kBACvBtB,a","file":"History.js","sourcesContent":["/**\n * Created by sidchik on 28.03.17.\n */\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport createHashHistory from 'history/createHashHistory';\nimport createBrowserHistory from 'history/createBrowserHistory';\nimport createMemoryHistory from 'history/createMemoryHistory';\nimport { _setRouting } from '../actions/routing';\n\nconst createHistory = (historyType) => {\n    let historyCreator;\n    switch (historyType) {\n        case 'hash':\n            historyCreator = createHashHistory;\n            break;\n        case 'browser':\n            historyCreator = createBrowserHistory;\n            break;\n        case 'memory':\n            historyCreator = createMemoryHistory;\n            break;\n        default:\n            historyCreator = createHashHistory;\n    }\n\n    class History extends React.Component {\n        history = historyCreator();\n\n        state = {\n            location: null,\n            action: null\n        };\n\n        extractQuery(query) {\n            return {};\n        }\n\n        componentWillMount() {\n            this.props.dispatch(_setRouting({\n                historyType: historyType,\n                history: this.history,\n                location: this.history.location,\n                query: this.extractQuery(),\n            }));\n\n            this.unlisten = this.history.listen((location, action) => {\n                // location is an object like window.location\n                this.setState({\n                    location: location,\n                    action: action\n                }, function () {\n                    this.props.dispatch(_setRouting({\n                        location: this.state.location,\n                        query: this.extractQuery(),\n                    }));\n                });\n            })\n        }\n\n        componentWillUnmount() {\n            this.unlisten();\n        }\n\n        render() {\n            return React.Children.only(this.props.children);\n        }\n    }\n\n    return connect(state => ({ routing: state.routing }))(History);\n};\n\nconst HashHistory = createHistory('hash');\nconst BrowserHistory = createHistory('browser');\nconst MemoryHistory = createHistory('memory');\n\nexport { HashHistory, BrowserHistory, MemoryHistory }\nexport default createHistory;"]}